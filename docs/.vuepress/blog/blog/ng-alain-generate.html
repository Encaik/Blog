<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>在 Ng-alain 中使用代码模板生成 | &lt;Encaik学前端/&gt;</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="manifest" href="/json/manifest.json">
    <link rel="apple-touch-icon" href="/img/favicon.ico">
    <link rel="mask-icon" href="/img/favicon.ico" color="#fff">
    <meta name="description" content="<Encaik学前端/>">
    <meta name="theme-color" content="#fff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/img/favicon.ico">
    <meta name="msapplication-TileColor" content="#fff">
    <link rel="preload" href="/assets/css/0.styles.68f41e63.css" as="style"><link rel="preload" href="/assets/js/app.ca281271.js" as="script"><link rel="preload" href="/assets/js/3.02789bd5.js" as="script"><link rel="preload" href="/assets/js/2.84b8fb33.js" as="script"><link rel="preload" href="/assets/js/33.c07713f3.js" as="script"><link rel="preload" href="/assets/js/4.ad3dc3f9.js" as="script"><link rel="prefetch" href="/assets/js/10.206ee2cb.js"><link rel="prefetch" href="/assets/js/11.c2b2d2b6.js"><link rel="prefetch" href="/assets/js/12.b4e53363.js"><link rel="prefetch" href="/assets/js/13.c2335f2a.js"><link rel="prefetch" href="/assets/js/14.b6a16070.js"><link rel="prefetch" href="/assets/js/15.71525eff.js"><link rel="prefetch" href="/assets/js/16.30956d88.js"><link rel="prefetch" href="/assets/js/17.dd27da23.js"><link rel="prefetch" href="/assets/js/18.78d0049a.js"><link rel="prefetch" href="/assets/js/19.279c12c6.js"><link rel="prefetch" href="/assets/js/20.67d83e1a.js"><link rel="prefetch" href="/assets/js/21.c58dd08d.js"><link rel="prefetch" href="/assets/js/22.48b8f556.js"><link rel="prefetch" href="/assets/js/23.86d5aa3b.js"><link rel="prefetch" href="/assets/js/24.1c893e4e.js"><link rel="prefetch" href="/assets/js/25.41c0bc4b.js"><link rel="prefetch" href="/assets/js/26.732ce0ce.js"><link rel="prefetch" href="/assets/js/27.1a4de8cc.js"><link rel="prefetch" href="/assets/js/28.8fef324a.js"><link rel="prefetch" href="/assets/js/29.9f0bc313.js"><link rel="prefetch" href="/assets/js/30.9b35b046.js"><link rel="prefetch" href="/assets/js/31.e6631269.js"><link rel="prefetch" href="/assets/js/32.95dde14b.js"><link rel="prefetch" href="/assets/js/34.487f9edd.js"><link rel="prefetch" href="/assets/js/35.7fa437e6.js"><link rel="prefetch" href="/assets/js/36.549e5fa9.js"><link rel="prefetch" href="/assets/js/37.c96e3073.js"><link rel="prefetch" href="/assets/js/38.c6a5b29c.js"><link rel="prefetch" href="/assets/js/39.54f931c0.js"><link rel="prefetch" href="/assets/js/40.a7d7590c.js"><link rel="prefetch" href="/assets/js/41.b2051ca4.js"><link rel="prefetch" href="/assets/js/42.09e55e70.js"><link rel="prefetch" href="/assets/js/43.d410dadf.js"><link rel="prefetch" href="/assets/js/44.4a9552f7.js"><link rel="prefetch" href="/assets/js/45.a8f019c9.js"><link rel="prefetch" href="/assets/js/46.614f1490.js"><link rel="prefetch" href="/assets/js/47.8f7a1744.js"><link rel="prefetch" href="/assets/js/48.8b5686fc.js"><link rel="prefetch" href="/assets/js/49.f9b201fb.js"><link rel="prefetch" href="/assets/js/5.ed0dbec3.js"><link rel="prefetch" href="/assets/js/50.0393a97d.js"><link rel="prefetch" href="/assets/js/51.1a33f502.js"><link rel="prefetch" href="/assets/js/52.dcf4d908.js"><link rel="prefetch" href="/assets/js/53.b187eaf6.js"><link rel="prefetch" href="/assets/js/54.bc15af31.js"><link rel="prefetch" href="/assets/js/55.1cff4e39.js"><link rel="prefetch" href="/assets/js/56.5b4701a7.js"><link rel="prefetch" href="/assets/js/57.1761e51a.js"><link rel="prefetch" href="/assets/js/58.97df829e.js"><link rel="prefetch" href="/assets/js/59.bf2cd0b1.js"><link rel="prefetch" href="/assets/js/6.3d336cbb.js"><link rel="prefetch" href="/assets/js/60.56b202c4.js"><link rel="prefetch" href="/assets/js/61.50e7685c.js"><link rel="prefetch" href="/assets/js/62.c4381614.js"><link rel="prefetch" href="/assets/js/63.8db1e5d8.js"><link rel="prefetch" href="/assets/js/64.a0e3652a.js"><link rel="prefetch" href="/assets/js/65.f3d46d7a.js"><link rel="prefetch" href="/assets/js/66.2b9207ab.js"><link rel="prefetch" href="/assets/js/67.1229322f.js"><link rel="prefetch" href="/assets/js/68.8aa6992f.js"><link rel="prefetch" href="/assets/js/69.cd66295d.js"><link rel="prefetch" href="/assets/js/7.f48b584f.js"><link rel="prefetch" href="/assets/js/70.8d1a8117.js"><link rel="prefetch" href="/assets/js/71.6125d1ec.js"><link rel="prefetch" href="/assets/js/72.12ed3057.js"><link rel="prefetch" href="/assets/js/73.800ea70c.js"><link rel="prefetch" href="/assets/js/74.cec6372c.js"><link rel="prefetch" href="/assets/js/75.206b6508.js"><link rel="prefetch" href="/assets/js/76.b3093e62.js"><link rel="prefetch" href="/assets/js/77.3ae77d03.js"><link rel="prefetch" href="/assets/js/78.32869b09.js"><link rel="prefetch" href="/assets/js/79.a7546a6c.js"><link rel="prefetch" href="/assets/js/8.9521684b.js"><link rel="prefetch" href="/assets/js/80.e5d94bf2.js"><link rel="prefetch" href="/assets/js/81.ef3371d1.js"><link rel="prefetch" href="/assets/js/82.526e7a8e.js"><link rel="prefetch" href="/assets/js/83.bce08650.js"><link rel="prefetch" href="/assets/js/84.a6389195.js"><link rel="prefetch" href="/assets/js/85.691dba30.js"><link rel="prefetch" href="/assets/js/86.45194931.js"><link rel="prefetch" href="/assets/js/87.281e8a9e.js"><link rel="prefetch" href="/assets/js/88.3351489f.js"><link rel="prefetch" href="/assets/js/9.076342c6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.68f41e63.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">&lt;Encaik学前端/&gt;</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">🏠首页</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">📓学习日志</a></div><div class="nav-item"><a href="/note/front/" class="nav-link">📃笔记摘录</a></div><div class="nav-item"><a href="/leecode/" class="nav-link">📰力扣记录</a></div><div class="nav-item"><a href="/repo/" class="nav-link">📦项目总结</a></div><div class="nav-item"><a href="/road/" class="nav-link">📖知识总览</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🎨爱好随笔" class="dropdown-title"><span class="title">🎨爱好随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/music/" class="nav-link">音乐</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Encaik" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitee.com/encaik" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://encaik.gitee.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  [国内镜像]
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">🏠首页</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">📓学习日志</a></div><div class="nav-item"><a href="/note/front/" class="nav-link">📃笔记摘录</a></div><div class="nav-item"><a href="/leecode/" class="nav-link">📰力扣记录</a></div><div class="nav-item"><a href="/repo/" class="nav-link">📦项目总结</a></div><div class="nav-item"><a href="/road/" class="nav-link">📖知识总览</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🎨爱好随笔" class="dropdown-title"><span class="title">🎨爱好随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/music/" class="nav-link">音乐</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Encaik" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitee.com/encaik" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://encaik.gitee.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  [国内镜像]
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/" aria-current="page" class="sidebar-link">前端工程化项目构建流程及基本结构</a></li><li><a href="/blog/ng-universal.html" class="sidebar-link">渲染方式对比</a></li><li><a href="/blog/ng-alain-generate.html" aria-current="page" class="active sidebar-link">在 Ng-alain 中使用代码模板生成</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ng-alain-generate.html#ng-generate-命令的使用" class="sidebar-link">ng generate 命令的使用</a></li><li class="sidebar-sub-header"><a href="/blog/ng-alain-generate.html#ng-g-ng-alain-xxx-命令的使用" class="sidebar-link">ng g ng-alain:xxx 命令的使用</a></li><li class="sidebar-sub-header"><a href="/blog/ng-alain-generate.html#wayboot-中的自定义模板编写" class="sidebar-link">wayboot 中的自定义模板编写</a></li><li class="sidebar-sub-header"><a href="/blog/ng-alain-generate.html#自定义模板的使用" class="sidebar-link">自定义模板的使用</a></li></ul></li><li><a href="/blog/ng-alain-mock.html" class="sidebar-link">在 Ng-alain 中使用 mock</a></li><li><a href="/blog/gis.html" class="sidebar-link">地图 GIS 类型应用开发总结</a></li><li><a href="/blog/harmony.html" class="sidebar-link">初次上手尝试开发鸿蒙 OS 上的 Javascript 应用</a></li><li><a href="/blog/vscode-extension.html" class="sidebar-link">学习 vscode 插件开发</a></li><li><a href="/blog/svelte.html" class="sidebar-link">初试 svelte 前端开发</a></li><li><a href="/blog/socketio.html" class="sidebar-link">使用 socket.io 做一个在线聊天室</a></li><li><a href="/blog/mapbox.html" class="sidebar-link">使用 mapbox-gl 创建数据可视化地图</a></li><li><a href="/blog/d3.html" class="sidebar-link">学习使用 D3.js 为图片绘制标注</a></li><li><a href="/blog/electron-angular.html" class="sidebar-link">学习 Electron 框架配合 Angular 制作桌面端应用</a></li><li><a href="/blog/electron-vue.html" class="sidebar-link">学习 Electron 框架配合 Vue 制作桌面端应用</a></li><li><a href="/blog/amap.html" class="sidebar-link">高德 JS api 总结</a></li><li><a href="/blog/three.html" class="sidebar-link">学习 three.js 库的使用</a></li><li><a href="/blog/flex&amp;grid.html" class="sidebar-link">详细理解 Flexbox 与 Gridbox 布局属性</a></li><li><a href="/blog/puppeteer.html" class="sidebar-link">初步学习如何使用 puppeteer 操控无头浏览器</a></li><li><a href="/blog/springboot.html" class="sidebar-link">学习 Springboot 做后端</a></li><li><a href="/blog/nodespider.html" class="sidebar-link">使用 node.js 完成爬虫操作</a></li><li><a href="/blog/nodecli.html" class="sidebar-link">自己做一个带 cli 的 npm 包发布</a></li><li><a href="/blog/webpack.html" class="sidebar-link">分析 webpack 源码，理解原理</a></li><li><a href="/blog/echarts.html" class="sidebar-link">Echarts 的使用及配置项对照</a></li><li><a href="/blog/csspre.html" class="sidebar-link">CSS 预处理器-Sass，Less，Stylus 对比</a></li><li><a href="/blog/taro.html" class="sidebar-link">Taro 多端统一小程序框架体验</a></li><li><a href="/blog/deno.html" class="sidebar-link">初探 Deno，学习用法</a></li><li><a href="/blog/ast.html" class="sidebar-link">从 estree 和 babel 中学习 js 的 AST</a></li><li><a href="/blog/canvas.html" class="sidebar-link">学习canvas制作一个代码美化截图页面</a></li><li><a href="/blog/console.html" class="sidebar-link">学习使用花里胡哨的Console</a></li><li><a href="/blog/performance.html" class="sidebar-link">学习前端性能监控PerformanceApi</a></li><li><a href="/blog/g6.html" class="sidebar-link">学习 AntV G6 图可视化引擎</a></li><li><a href="/blog/tdt&amp;cesium.html" class="sidebar-link">天地图 api 及 Cesium.js 库总结</a></li><li><a href="/blog/golang.html" class="sidebar-link">学习使用Golang</a></li><li><a href="/blog/angular.html" class="sidebar-link">学习使用 Angular</a></li><li><a href="/blog/vue3.html" class="sidebar-link">从头开始学习Vue3源码</a></li><li><a href="/blog/vue2.html" class="sidebar-link">从头开始学习Vue2源码</a></li><li><a href="/blog/tensorflow.html" class="sidebar-link">学习使用 Tensorflow.js 机器学习</a></li><li><a href="/blog/koa2-learn.html" class="sidebar-link">Koa2基本学习</a></li><li><a href="/blog/docker-project.html" class="sidebar-link">docker-compose部署流程</a></li><li><a href="/blog/docker-compose.html" class="sidebar-link">Docker-compose使用</a></li><li><a href="/blog/docker.html" class="sidebar-link">Docker 使用</a></li><li><a href="/blog/flutter.html" class="sidebar-link">学习使用Flutter进行移动端开发</a></li><li><a href="/blog/react-native.html" class="sidebar-link">React Native学习-创建项目</a></li><li><a href="/blog/react.html" class="sidebar-link">React学习-创建项目</a></li><li><a href="/blog/vuetestutils2.html" class="sidebar-link">vue-test-utils学习-用nightwatch进行e2e测试</a></li><li><a href="/blog/vuetestutils.html" class="sidebar-link">vue-test-utils学习-用jest进行单元测试</a></li><li><a href="/blog/tsspider.html" class="sidebar-link">Typescr学习-实现基础爬虫</a></li><li><a href="/blog/egg.html" class="sidebar-link">学习使用Egg.js搭建后端</a></li><li><a href="/blog/tonejs.html" class="sidebar-link">学习使用 Tone.js 制作网页版乐器</a></li><li><a href="/blog/http.html" class="sidebar-link">前端请求发展及使用</a></li><li><a href="/blog/git.html" class="sidebar-link">Git 语法及使用</a></li><li><a href="/blog/vuepress.html" class="sidebar-link">Vuepress搭建博客</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="在-ng-alain-中使用代码模板生成"><a href="#在-ng-alain-中使用代码模板生成" class="header-anchor">#</a> 在 Ng-alain 中使用代码模板生成</h1> <h2 id="ng-generate-命令的使用"><a href="#ng-generate-命令的使用" class="header-anchor">#</a> <strong>ng generate</strong> 命令的使用</h2> <p>Angular CLI 中有 ng generate 命令可以通过 Schematics 生成代码模板，中文文档中有 Angular 自带生成命令。</p> <p><a href="https://angular.cn/cli/generate" target="_blank" rel="noopener noreferrer">https://angular.cn/cli/generate<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>除了默认模板，Angular 还支持第三方自定义模板，比如 ng-alain 实现的自定义模板。通过使用命令 ng g ng-alain:xxx 来使用 ng-alain 的模板。</p> <p>Angular 将通过在 node_modules 中寻找冒号前面的同名库，即 ng-alain 库，查找库中的 schematics 文件夹，然后读取文件夹内的 collection.json 文件，在文件中找到要生成的 xxx 模板，然后执行模板文件夹下的 factory 函数生成代码模板。详细内容可以查阅 schematic 相关文档。</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/653410/1673941029232-4bd086ca-e1b0-455b-af62-fdbe794cc051.png#averageHue=%231f2329&amp;clientId=u441a7c51-44a6-4&amp;from=paste&amp;height=512&amp;id=u681d8db7&amp;name=image.png&amp;originHeight=512&amp;originWidth=360&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=16970&amp;status=done&amp;style=none&amp;taskId=uacde731a-7dbb-48b6-b577-5b6f45fd6d8&amp;title=&amp;width=360" alt="image.png"></p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/653410/1673940732734-d7f97031-258d-48ec-b285-c67f61467177.png#averageHue=%2320252b&amp;clientId=u441a7c51-44a6-4&amp;from=paste&amp;height=201&amp;id=u5c9cb328&amp;name=image.png&amp;originHeight=201&amp;originWidth=289&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=7189&amp;status=done&amp;style=none&amp;taskId=ube765b9d-9e7a-46e9-940d-bef055d5566&amp;title=&amp;width=289" alt="image.png"></p> <p><a href="https://angular.cn/guide/schematics-authoring" target="_blank" rel="noopener noreferrer">https://angular.cn/guide/schematics-authoring<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="ng-g-ng-alain-xxx-命令的使用"><a href="#ng-g-ng-alain-xxx-命令的使用" class="header-anchor">#</a> ng g ng-alain:xxx 命令的使用</h2> <p>ng-alain 框架中命令的使用，文档中比较全面，可以直接查阅文档使用。
<a href="https://ng-alain.com/cli/generate/zh" target="_blank" rel="noopener noreferrer">https://ng-alain.com/cli/generate/zh<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
ng-alain 的自定义模板，tpl 类型模板的 json 定义：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://json-schema.org/draft-07/schema&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;$id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SchematicsNgAlainTplComponent&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ng Alain Tpl Options Schema&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;additionalProperties&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;path&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The path at which to create the component file, relative to the current workspace. Default is a folder with the same name as the component in the project root.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;visible&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;project&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The name of the project.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;$default&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;$source&quot;</span><span class="token operator">:</span> <span class="token string">&quot;projectName&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The name of the component.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;$default&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;$source&quot;</span><span class="token operator">:</span> <span class="token string">&quot;argv&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-prompt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;What name would you like to use for the component?&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;displayBlock&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Specifies if the style will contain `:host { display: block; }`.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token string">&quot;alias&quot;</span><span class="token operator">:</span> <span class="token string">&quot;b&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;inlineStyle&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Include styles inline in the component.ts file. Only CSS styles can be included inline. By default, an external styles file is created and referenced in the component.ts file.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token string">&quot;alias&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-user-analytics&quot;</span><span class="token operator">:</span> <span class="token number">9</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;inlineTemplate&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Include template inline in the component.ts file. By default, an external template file is created and referenced in the component.ts file.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-user-analytics&quot;</span><span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;viewEncapsulation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The view encapsulation strategy to use in the new component.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;enum&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Emulated&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;None&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ShadowDom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;alias&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-user-analytics&quot;</span><span class="token operator">:</span> <span class="token number">11</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;changeDetection&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The change detection strategy to use in the new component.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;enum&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Default&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;OnPush&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Default&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;alias&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;prefix&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The prefix to apply to the generated component selector.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;alias&quot;</span><span class="token operator">:</span> <span class="token string">&quot;p&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;oneOf&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token string">&quot;maxLength&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token string">&quot;minLength&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token string">&quot;format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;html-selector&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The file extension or preprocessor to use for style files, or 'none' to skip generating the style file.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;css&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;enum&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;css&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;scss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sass&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-user-analytics&quot;</span><span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Adds a developer-defined type to the filename, in the format \&quot;name.type.ts\&quot;.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Component&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;skipTests&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Do not create \&quot;spec.ts\&quot; test files for the new component.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-user-analytics&quot;</span><span class="token operator">:</span> <span class="token number">12</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;flat&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Create the new files at the top level of the current project.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;skipImport&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Do not import this component into the owning NgModule.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-user-analytics&quot;</span><span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;html-selector&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The HTML selector to use for this component.&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;skipSelector&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Specifies if the component should have a selector or not.&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;export&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The declaring NgModule exports this component.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-user-analytics&quot;</span><span class="token operator">:</span> <span class="token number">19</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;withoutPrefix&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;指定选择器名不加前缀 (Without prefix to selectors)&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;withoutModulePrefixInComponentName&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;组件名不加模块名前缀 (Without prefix to component name)&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;module&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allows specification of the declaring module.&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;alias&quot;</span><span class="token operator">:</span> <span class="token string">&quot;m&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-prompt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Specify which module name:&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;tplName&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;指定模板名称 (Specifies template name)&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;$default&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;$source&quot;</span><span class="token operator">:</span> <span class="token string">&quot;argv&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-prompt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;What template name would you like to use for the component:&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;target&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;指定目标路径，支持 `bus/list` 写法 (Specifies relative path, could be set like `bus/list`.)&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;alias&quot;</span><span class="token operator">:</span> <span class="token string">&quot;t&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;modal&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;default&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;指定是否使用模态框 (Specifies using modal mode)&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;x-prompt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Would you like to modal mode?&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;required&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;tplName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;modal&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="wayboot-中的自定义模板编写"><a href="#wayboot-中的自定义模板编写" class="header-anchor">#</a> wayboot 中的自定义模板编写</h2> <p>以该模板为例，需要在_cli-tpl 文件夹中创建模板文件夹，如该模板名为 basic，文件夹中的内容为固定格式，双下划线开头结尾的部分均为占位符。</p> <p>最里层的各种文件可随意添加，如自行添加的 model.ts.template 文件。</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/653410/1673318138869-de845184-85e7-4061-9725-c1a8602a37e2.png#averageHue=%2320252c&amp;clientId=u849626f2-c0ed-4&amp;from=paste&amp;height=181&amp;id=u19c3564f&amp;name=image.png&amp;originHeight=181&amp;originWidth=423&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=11470&amp;status=done&amp;style=none&amp;taskId=u4ced2289-fabb-4394-92a6-20455513091&amp;title=&amp;width=423" alt="image.png"></p> <p>_cli-tpl 中有一个_fix.js 文件，当执行生成命令时，会将参数传至该文件进行处理后再生成，所以这里可以对输入参数做一些处理。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 自定义模板生成中间处理模块
 * 语雀文档：https://www.yuque.com/zhaoyj/cixlru/gz4p5dcg4y734sd6
 */</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;child_process&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CONFIG_DIR_PATH</span> <span class="token operator">=</span> <span class="token string">&quot;../_tpl_config&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> getStOptionTpl<span class="token punctuation">,</span> getSfOptionTpl <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>
  __dirname<span class="token punctuation">,</span>
  <span class="token constant">CONFIG_DIR_PATH</span><span class="token punctuation">,</span>
  <span class="token string">&quot;/common.js&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">fix</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取模板参数与组件名参数</span>
    <span class="token keyword">const</span> configName <span class="token operator">=</span> options<span class="token punctuation">.</span>extraArgs<span class="token punctuation">.</span>config<span class="token punctuation">;</span>
    <span class="token keyword">const</span> tplName <span class="token operator">=</span> options<span class="token punctuation">.</span>tplName<span class="token punctuation">;</span>
    <span class="token comment">//如果有传入模板参数则进入参数处理，否则直接生成</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>configName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//获取传入配置文件路径</span>
      <span class="token keyword">const</span> configPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>
        __dirname<span class="token punctuation">,</span>
        <span class="token constant">CONFIG_DIR_PATH</span><span class="token punctuation">,</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>configName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//如果是页面生成则在处理完参数后，自动再执行form弹窗生成命令</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>tplName <span class="token operator">===</span> <span class="token string">&quot;basic&quot;</span> <span class="token operator">||</span> tplName <span class="token operator">===</span> <span class="token string">&quot;basic-tree&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> search<span class="token punctuation">,</span> st<span class="token punctuation">,</span> api<span class="token punctuation">,</span> model<span class="token punctuation">,</span> layout <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>configPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>extraArgs <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>options<span class="token punctuation">.</span>extraArgs<span class="token punctuation">,</span>
          dtoName<span class="token operator">:</span> <span class="token function">classify</span><span class="token punctuation">(</span>configName<span class="token punctuation">)</span><span class="token punctuation">,</span>
          Model<span class="token operator">:</span> <span class="token function">modelParse</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">,</span>
          searchSchema<span class="token operator">:</span> <span class="token function">sfParse</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">,</span>
          columns<span class="token operator">:</span> <span class="token function">stParse</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span> options<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
          api<span class="token operator">:</span> <span class="token function">apiParse</span><span class="token punctuation">(</span>api<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">,</span>
          layout
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> cmd <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ng g ng-alain:tpl form form -m=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>module<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> --target=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> --modal=true --config=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>configName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
          process<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>cmd<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> stdout<span class="token punctuation">,</span> stderr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> stderr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 如果是弹窗生成，处理参数后生成即可</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>tplName <span class="token operator">===</span> <span class="token string">&quot;form&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> sf<span class="token punctuation">,</span> api <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>configPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>extraArgs<span class="token punctuation">.</span>schema <span class="token operator">=</span> <span class="token function">sfParse</span><span class="token punctuation">(</span>sf<span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>extraArgs<span class="token punctuation">.</span>api <span class="token operator">=</span> api<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * sf配置解析，用于解析搜索栏及弹窗用到的sf配置
 * @param {*} config 配置参数
 * @returns 转换后sf格式参数
 */</span>
<span class="token keyword">function</span> <span class="token function">sfParse</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> schema <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    schema<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">getSfOptionTpl</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>type<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> schema<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;,\n      &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * st配置解析，用于解析页面上列表的列及操作项
 * @param {*} config 配置参数
 * @param {*} componentName 命令行组件名（烤串格式）
 * @returns 转换后st格式参数
 */</span>
<span class="token keyword">function</span> <span class="token function">stParse</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> componentName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{ title: '序号', type: 'no' }</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> buttons <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span>columns<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">column</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> columnStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">title: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>column<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;,
      index: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>column<span class="token punctuation">.</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>column<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      columnStr <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">,
      type: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>column<span class="token punctuation">.</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    columns<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{
      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>columnStr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    }</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">option</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    buttons<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
      option<span class="token punctuation">.</span>tpl
        <span class="token operator">?</span> <span class="token function">getStOptionTpl</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>tpl<span class="token punctuation">,</span> <span class="token punctuation">{</span> componentName<span class="token operator">:</span> <span class="token function">classify</span><span class="token punctuation">(</span>componentName<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  columns<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{
    title: '操作',
    width: 250,
    buttons: [
      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>buttons<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;,\n&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    ]
  }</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> columns<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;,\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 类型定义文件解析，用于解析需要定义的类型
 * @param {*} config 配置参数
 * @returns 转换后model.ts文件内容
 */</span>
<span class="token keyword">function</span> <span class="token function">modelParse</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> modelConfig <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key1</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tempArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    config<span class="token punctuation">[</span>key1<span class="token punctuation">]</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      tempArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">; // </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    modelConfig<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">// </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>config<span class="token punctuation">[</span>key1<span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
export interface </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> {
  </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tempArr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;\n  &quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
}</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> modelConfig<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/,/g</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 *  api 解析生成对应的 service和找到相关的引用类型
 * @param {*} api  api 参数
 * @param {*} model 配置参数
 * @returns newapi 转换后api项
 */</span>
<span class="token keyword">function</span> <span class="token function">apiParse</span><span class="token punctuation">(</span><span class="token parameter">api<span class="token punctuation">,</span> model</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  api <span class="token operator">=</span> api <span class="token operator">?</span> api <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> newapi <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> importModel <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>api<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> api<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      newapi<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> api<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> api<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      newapi<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> api<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">.</span>url<span class="token punctuation">;</span>
      newapi<span class="token punctuation">[</span>item <span class="token operator">+</span> <span class="token string">&quot;ReqModel&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> api<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token operator">?.</span>reqModel
        <span class="token operator">?</span> api<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token operator">?.</span>reqModel
        <span class="token operator">:</span> <span class="token string">&quot;any&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      newapi<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> api<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    importModel<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  importModel <span class="token operator">=</span> importModel<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  newapi<span class="token punctuation">.</span>importModel <span class="token operator">=</span> importModel<span class="token punctuation">;</span>
  <span class="token keyword">return</span> newapi<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 用于将烤串命名转换为双驼峰命名
 * @param {*} str 待转换字符串
 * @returns 转换后字符串
 */</span>
<span class="token keyword">function</span> <span class="token function">classify</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(^|-)(\w)/g</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">$<span class="token number">0</span><span class="token punctuation">,</span> $<span class="token number">1</span><span class="token punctuation">,</span> $<span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> $<span class="token number">2.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  fix
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在编写模板时，经常会有一些，下划线开头结尾的字符串，这些是 ng-alain 定义的占位符，在生成模板时会替换成对应的变量。</p> <table><thead><tr><th>类型</th> <th>参数名</th> <th>默认</th> <th>描述</th></tr></thead> <tbody><tr><td>变量</td> <td>project</td> <td>-</td> <td>项目名</td></tr> <tr><td></td> <td>name</td> <td>-</td> <td>名称，相当于命令行的 <name></name></td></tr> <tr><td></td> <td>path</td> <td>-</td> <td>目标路径</td></tr> <tr><td></td> <td>flat</td> <td>false</td> <td>文件是否扁平结构</td></tr> <tr><td></td> <td>inlineTemplate</td> <td>false</td> <td>是否内联模板（固定值：false）</td></tr> <tr><td></td> <td>selector</td> <td>-</td> <td>组件 selector</td></tr> <tr><td></td> <td>componentName</td> <td>-</td> <td>组件名称</td></tr> <tr><td></td> <td>changeDetection</td> <td>Default</td> <td>组件 changeDetection 值</td></tr> <tr><td></td> <td>modal</td> <td>-</td> <td>是否使用 Modal 展示</td></tr> <tr><td>方法</td> <td>decamelize</td> <td>-</td> <td>将字母串转换为由下划线分隔的所有小写字母</td></tr> <tr><td></td> <td>dasherize</td> <td>-</td> <td>将空格或下划线用破折号替换</td></tr> <tr><td></td> <td>camelize</td> <td>-</td> <td>返回字符串的小骆驼拼写法形式</td></tr> <tr><td></td> <td>classify</td> <td>-</td> <td>返回字符串的大骆驼拼写法形式</td></tr> <tr><td></td> <td>underscore</td> <td>-</td> <td>将字母串转换为由下划线分隔的所有小写字母</td></tr> <tr><td></td> <td>capitalize</td> <td>-</td> <td>返回字符串首字母大写</td></tr></tbody></table> <p>模板文件示例：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> OnInit<span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>viewEncapsulation<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> ViewEncapsulation<span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">}</span><span class="token operator">%</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span><span class="token punctuation">(</span>changeDetection <span class="token operator">!==</span> <span class="token string">'Default'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> ChangeDetectionStrategy<span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">}</span><span class="token operator">%</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> ViewChild <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> STComponent<span class="token punctuation">,</span> STColumn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@delon/abc/st'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SFSchema <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@delon/form'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ModalHelper <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@delon/theme'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NzMessageService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ng-zorro-antd/message'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NzFormatEmitEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ng-zorro-antd/tree'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Components<span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token function">classify</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>FormComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./form/form.component'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token function">classify</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>Service <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./&lt;%= dasherize(name) %&gt;.service'</span><span class="token punctuation">;</span>

@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'&lt;%= selector %&gt;'</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">'./&lt;%= dasherize(name) %&gt;.component.html'</span><span class="token punctuation">,</span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>inlineStyle<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token operator">%</span><span class="token operator">&gt;</span>
  styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./&lt;%= dasherize(name) %&gt;.component.&lt;%= styleext %&gt;'</span><span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">}</span> <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>viewEncapsulation<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  encapsulation<span class="token operator">:</span> ViewEncapsulation<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">%=</span> viewEncapsulation <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">}</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>changeDetection <span class="token operator">!==</span> <span class="token string">'Default'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  changeDetection<span class="token operator">:</span> ChangeDetectionStrategy<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">%=</span> changeDetection <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">}</span> <span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token operator">&lt;</span><span class="token operator">%=</span> componentName <span class="token operator">%</span><span class="token operator">&gt;</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
  nodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  url <span class="token operator">=</span> <span class="token string">'&lt;%= extraArgs.api.list %&gt;'</span><span class="token punctuation">;</span>
  searchSchema<span class="token operator">:</span> SFSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
    properties<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token operator">&lt;</span><span class="token operator">%=</span> extraArgs<span class="token punctuation">.</span>searchSchema <span class="token operator">%</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  @<span class="token function">ViewChild</span><span class="token punctuation">(</span><span class="token string">'st'</span><span class="token punctuation">)</span> <span class="token keyword">private</span> <span class="token keyword">readonly</span> st<span class="token operator">!</span><span class="token operator">:</span> STComponent<span class="token punctuation">;</span>
  columns<span class="token operator">:</span> STColumn<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token operator">&lt;</span><span class="token operator">%=</span> extraArgs<span class="token punctuation">.</span>columns <span class="token operator">%</span><span class="token operator">&gt;</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> msg<span class="token operator">:</span> NzMessageService<span class="token punctuation">,</span> <span class="token keyword">private</span> modal<span class="token operator">:</span> ModalHelper<span class="token punctuation">,</span> <span class="token keyword">private</span> <span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token function">camelize</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>Service<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token function">classify</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>Service</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'&lt;%= componentName %&gt; init!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token function">camelize</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>Service<span class="token punctuation">.</span><span class="token function">getTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>nodes <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modal
      <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
        Components<span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token function">classify</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>FormComponent<span class="token punctuation">,</span>
        <span class="token punctuation">{</span> operateType<span class="token operator">:</span> <span class="token string">'add'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          modalOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
            nzTitle<span class="token operator">:</span> <span class="token string">'新增xxx'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">record</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token operator">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>st<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">edit</span><span class="token punctuation">(</span>params<span class="token operator">:</span> NzSafeAny<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>st<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">remove</span><span class="token punctuation">(</span>params<span class="token operator">:</span> NzSafeAny<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>st<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">nzEvent</span><span class="token punctuation">(</span>event<span class="token operator">:</span> NzFormatEmitEvent<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token operator">?.</span>eventName <span class="token operator">===</span> <span class="token string">'click'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>st<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> event<span class="token punctuation">.</span>node<span class="token operator">?.</span>key <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> toTop<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="自定义模板的使用"><a href="#自定义模板的使用" class="header-anchor">#</a> 自定义模板的使用</h2> <p>模板的作用在生成页面共有结构，但是不同的业务页面会有各自的数据类型等业务数据，因此需要定义一个配置文件来读取生成代码所需要的业务数据。</p> <p>在和_cli-tpl 文件夹设定了一个默认的配置文件夹_tpl_config，每个业务页面的配置可以写在对应名称的文件中，比如有一个组件名为 my-user，那么可以新建一个 my-user.js 来定义业务数据。</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>文件名为参数传入，所以并非一定要与组件名一致，但是为了生成组件的维护和配置文件的对应关系，这里建议组件与配置文件名称一致。</p></div> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 搜索栏业务数据定义，每个搜索字段定义一条数据
 * title：字段显示在页面上的名称，对应sf配置title属性
 * index：字段key值，对应sf配置每个字段的key
 * type：字段类型，对应sf配置type属性
 */</span>
<span class="token keyword">const</span> search <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;名称&quot;</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 表格业务数据定义，分为columns数据显示定义和options数据操作定义
 * columns中：
 * title：字段显示在表头上的名称，对应st配置title属性
 * index：字段名，对应st配置index属性
 * type：字段类型，对应st配置type属性
 * options中：
 * tpl：预置类型模板名，直接替换对应模板
 * type：对应st buttons配置的type
 */</span>
<span class="token keyword">const</span> st <span class="token operator">=</span> <span class="token punctuation">{</span>
  columns<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;名称&quot;</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token string">&quot;name&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;电话&quot;</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&quot;number&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  options<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> tpl<span class="token operator">:</span> <span class="token string">&quot;view&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> tpl<span class="token operator">:</span> <span class="token string">&quot;edit&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> tpl<span class="token operator">:</span> <span class="token string">&quot;del&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">&quot;测试&quot;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&quot;link&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 新增，修改，查看数据定义，每个搜索字段定义一条数据，与搜索栏业务数据定义格式一致
 * @title 对应sf配置title属性
 * @type type为组件类型string | number | textarea | select等
 * @index 字段key值，对应sf配置每个字段的key
 * @enum {*} 同步数据源,部分字段需要定义数据
 * @action 组件为upload时 上传地址
 * @listByIdsUrl 组件为upload时 根据id查询数据 接口地址
 */</span>
<span class="token keyword">const</span> sf <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;名称&quot;</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;性别&quot;</span><span class="token punctuation">,</span>
    index<span class="token operator">:</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;select&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;待支付&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;WAIT_BUYER_PAY&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;已支付&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;TRADE_SUCCESS&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;交易完成&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;TRADE_FINISHED&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;电话&quot;</span><span class="token punctuation">,</span>
    index<span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;tree-select&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;待支付&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;WAIT_BUYER_PAY&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;已支付&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;TRADE_SUCCESS&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;交易完成&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;TRADE_FINISHED&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * model定义
 */</span>
<span class="token keyword">const</span> model <span class="token operator">=</span> <span class="token punctuation">{</span>
  Info<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;基本信息&quot;</span><span class="token punctuation">,</span>
    list<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;名称&quot;</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&quot;string[]&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;性别&quot;</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&quot;PersonCenter[]&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;电话&quot;</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  PersonCenter<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;个人中心&quot;</span><span class="token punctuation">,</span>
    list<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;基本信息&quot;</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token string">&quot;basicInfo&quot;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;消息中心&quot;</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token string">&quot;infoCenter&quot;</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * api定义
 *
 */</span>
<span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token punctuation">{</span>
  list<span class="token operator">:</span> <span class="token string">&quot;/list&quot;</span><span class="token punctuation">,</span>
  add<span class="token operator">:</span> <span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">&quot;/my-user/add&quot;</span><span class="token punctuation">,</span>
    reqModel<span class="token operator">:</span> <span class="token string">&quot;Info&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  remove<span class="token operator">:</span> <span class="token string">&quot;/my-user/remove&quot;</span><span class="token punctuation">,</span>
  update<span class="token operator">:</span> <span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">&quot;/my-user/update&quot;</span><span class="token punctuation">,</span>
    reqModel<span class="token operator">:</span> <span class="token string">&quot;Info&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  detail<span class="token operator">:</span> <span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">&quot;/my-user/detail&quot;</span><span class="token punctuation">,</span>
    reqModel<span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  treeList<span class="token operator">:</span> <span class="token string">&quot;/treeList&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 布局参数定义
 * basic-tree:
 * treeWidth:左侧树占有页面宽度
 * treeGutter:左侧树与右侧列表间隔
 */</span>
<span class="token keyword">const</span> layout <span class="token operator">=</span> <span class="token punctuation">{</span>
  treeWidth<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  treeGutter<span class="token operator">:</span> <span class="token number">16</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  search<span class="token punctuation">,</span>
  st<span class="token punctuation">,</span>
  sf<span class="token punctuation">,</span>
  api<span class="token punctuation">,</span>
  model<span class="token punctuation">,</span>
  layout
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>定义好数据结构以后，然后使用以下命令生成代码：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>ng g ng-alain:tpl basic <span class="token punctuation">[</span>your component name<span class="token punctuation">]</span> -m<span class="token operator">=</span><span class="token punctuation">[</span>your module<span class="token punctuation">]</span> --config<span class="token operator">=</span><span class="token punctuation">[</span>your config name<span class="token punctuation">]</span>
<span class="token comment"># 如 ng g ng-alain:tpl basic my-user -m=components --config=my-user</span>
</code></pre></div><p>生成后的目录，和模板中的目录一致。</p> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/653410/1673935960838-2d4f1713-87b0-4cfb-8abf-4b940cbcf2d9.png#averageHue=%23222830&amp;clientId=u441a7c51-44a6-4&amp;from=paste&amp;height=181&amp;id=ud08f343a&amp;name=image.png&amp;originHeight=181&amp;originWidth=282&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=8382&amp;status=done&amp;style=none&amp;taskId=u613b6d77-7854-40e9-b5af-b433827f1f0&amp;title=&amp;width=282" alt="image.png"></p> <p>页面如下：</p> <h4 id="basic-模板"><a href="#basic-模板" class="header-anchor">#</a> basic 模板</h4> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/653410/1673936934442-ed2d1327-4943-4876-9bb9-91cdb1f4cf3b.png#averageHue=%23fdfcfc&amp;clientId=u441a7c51-44a6-4&amp;from=paste&amp;height=938&amp;id=u91ad43ff&amp;name=image.png&amp;originHeight=938&amp;originWidth=1921&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=79859&amp;status=done&amp;style=none&amp;taskId=ub0d89daa-f045-477c-977b-47d7950987e&amp;title=&amp;width=1921" alt="image.png"></p> <h4 id="basic-tree-模板"><a href="#basic-tree-模板" class="header-anchor">#</a> basic-tree 模板</h4> <p><img src="https://cdn.nlark.com/yuque/0/2023/png/653410/1673936961590-8b5ff425-042b-4946-ba53-d936ca17e945.png#averageHue=%23fcfcfc&amp;clientId=u441a7c51-44a6-4&amp;from=paste&amp;height=937&amp;id=ubdaeffae&amp;name=image.png&amp;originHeight=937&amp;originWidth=1921&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=83482&amp;status=done&amp;style=none&amp;taskId=u8d7b9701-932c-4090-8d1f-37467048e6b&amp;title=&amp;width=1921" alt="image.png">
根据定义好的数据结构，生成以下结构体：</p> <h4 id="model-类型定义"><a href="#model-类型定义" class="header-anchor">#</a> model 类型定义</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">// 基本信息</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Info</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 名称</span>
  sex<span class="token operator">:</span> PersonCenter<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 性别</span>
  phone<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 电话</span>
<span class="token punctuation">}</span>

<span class="token comment">// 个人中心</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">PersonCenter</span> <span class="token punctuation">{</span>
  basicInfo<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 基本信息</span>
  infoCenter<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// 消息中心</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="搜索-sf-schema-定义"><a href="#搜索-sf-schema-定义" class="header-anchor">#</a> 搜索 sf schema 定义</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code>searchSchema<span class="token operator">:</span> SFSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;名称&quot;</span><span class="token punctuation">,</span>
      <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="弹窗-sf-schema-定义"><a href="#弹窗-sf-schema-定义" class="header-anchor">#</a> 弹窗 sf schema 定义</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code>schema<span class="token operator">:</span> SFSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;名称&quot;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    sex<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;性别&quot;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;待支付&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;WAIT_BUYER_PAY&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;已支付&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;TRADE_SUCCESS&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;交易完成&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;TRADE_FINISHED&quot;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      ui<span class="token operator">:</span> <span class="token punctuation">{</span>
        widget<span class="token operator">:</span> <span class="token string">&quot;select&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    phone<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;电话&quot;</span><span class="token punctuation">,</span>
      type<span class="token operator">:</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
      <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;待支付&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;WAIT_BUYER_PAY&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;已支付&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;TRADE_SUCCESS&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">&quot;交易完成&quot;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">&quot;TRADE_FINISHED&quot;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      ui<span class="token operator">:</span> <span class="token punctuation">{</span>
        widget<span class="token operator">:</span> <span class="token string">&quot;tree-select&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="st-schema-定义"><a href="#st-schema-定义" class="header-anchor">#</a> st schema 定义</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code>columns<span class="token operator">:</span> STColumn<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'序号'</span><span class="token punctuation">,</span> <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'no'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'名称'</span><span class="token punctuation">,</span>
      index<span class="token operator">:</span> <span class="token string">'name'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'电话'</span><span class="token punctuation">,</span>
      index<span class="token operator">:</span> <span class="token string">'phone'</span><span class="token punctuation">,</span>
      <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'number'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">'操作'</span><span class="token punctuation">,</span>
      width<span class="token operator">:</span> <span class="token number">250</span><span class="token punctuation">,</span>
      buttons<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          text<span class="token operator">:</span> <span class="token string">'查看'</span><span class="token punctuation">,</span>
          <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'modal'</span><span class="token punctuation">,</span>
          className<span class="token operator">:</span> <span class="token string">'text-success'</span><span class="token punctuation">,</span>
          modal<span class="token operator">:</span> <span class="token punctuation">{</span>
            component<span class="token operator">:</span> ComponentsYourUserFormComponent<span class="token punctuation">,</span>
            modalOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
              nzTitle<span class="token operator">:</span> <span class="token string">'查看xxx'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">params</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> record<span class="token punctuation">.</span>id<span class="token punctuation">,</span> operateType<span class="token operator">:</span> <span class="token string">'view'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">record<span class="token punctuation">,</span> modal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          text<span class="token operator">:</span> <span class="token string">'编辑'</span><span class="token punctuation">,</span>
          <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'modal'</span><span class="token punctuation">,</span>
          modal<span class="token operator">:</span> <span class="token punctuation">{</span>
            component<span class="token operator">:</span> ComponentsYourUserFormComponent<span class="token punctuation">,</span>
            modalOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
              nzTitle<span class="token operator">:</span> <span class="token string">'编辑xxx'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">params</span><span class="token punctuation">(</span><span class="token parameter">record</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> record<span class="token punctuation">.</span>id<span class="token punctuation">,</span> operateType<span class="token operator">:</span> <span class="token string">'edit'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">record<span class="token punctuation">,</span> modal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span>modal<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          text<span class="token operator">:</span> <span class="token string">'删除'</span><span class="token punctuation">,</span>
          <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'del'</span><span class="token punctuation">,</span>
          pop<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'确定要删除吗?'</span><span class="token punctuation">,</span>
            okType<span class="token operator">:</span> <span class="token string">'danger'</span><span class="token punctuation">,</span>
            icon<span class="token operator">:</span> <span class="token string">'clock-circle'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          className<span class="token operator">:</span> <span class="token string">'text-error'</span><span class="token punctuation">,</span>
          <span class="token function-variable function">click</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">record<span class="token punctuation">,</span> modal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'测试'</span><span class="token punctuation">,</span> <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'link'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>service 定义</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> _HttpClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@delon/theme&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BaseService<span class="token punctuation">,</span> Ret <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@shared&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;rxjs&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Info<span class="token punctuation">,</span> PersonCenter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./your-user.model&quot;</span><span class="token punctuation">;</span>
@<span class="token function">Injectable</span><span class="token punctuation">(</span><span class="token punctuation">{</span> providedIn<span class="token operator">:</span> <span class="token string">&quot;root&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">YourUserService</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> http<span class="token operator">:</span> _HttpClient</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token comment">/**
   * @description 获取树数据
   */</span>
  <span class="token function">getTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>Ret<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>http<span class="token punctuation">.</span>post<span class="token operator">&lt;</span>Ret<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>BaseService<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/treeList</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * @description 新增
   */</span>
  <span class="token function">add</span><span class="token punctuation">(</span>addParams<span class="token operator">:</span> Info<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>Ret<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>http<span class="token punctuation">.</span>post<span class="token operator">&lt;</span>Ret<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>BaseService<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/my-user/add</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>addParams
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * @description 更新
   */</span>
  <span class="token function">update</span><span class="token punctuation">(</span>editParams<span class="token operator">:</span> Info<span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>Ret<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>http<span class="token punctuation">.</span>post<span class="token operator">&lt;</span>Ret<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>BaseService<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/my-user/update</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>editParams
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * @description 详情
   */</span>
  <span class="token function">detail</span><span class="token punctuation">(</span>detailParams<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>Ret<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>http<span class="token punctuation">.</span>post<span class="token operator">&lt;</span>Ret<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>BaseService<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/my-user/detail</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>detailParams
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * @description 删除
   */</span>
  <span class="token function">remove</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Observable<span class="token operator">&lt;</span>Ret<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>http<span class="token punctuation">.</span>post<span class="token operator">&lt;</span>Ret<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>BaseService<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/my-user/remove</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      id
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">发布日期:</span> <span class="time">4/18/2023, 2:04:25 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/ng-universal.html" class="prev">
        渲染方式对比
      </a></span> <span class="next"><a href="/blog/ng-alain-mock.html">
        在 Ng-alain 中使用 mock
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><div></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.ca281271.js" defer></script><script src="/assets/js/3.02789bd5.js" defer></script><script src="/assets/js/2.84b8fb33.js" defer></script><script src="/assets/js/33.c07713f3.js" defer></script><script src="/assets/js/4.ad3dc3f9.js" defer></script>
  </body>
</html>
